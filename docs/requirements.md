# IdeaTube 要件定義書

## 1. 概要

IdeaTubeは、YouTuberと視聴者をつなぐラットフォームです。視聴者がYouTube企画のアイデアを投稿し、コミュニティがそれを評価することで、クリエイターが本当に求められているコンテンツを把握できるようにします。さらに、チャンネルオーナーが魅力的な企画アイデアを発見した際には、企画詳細ページから直接クラウドファンディングを開始し、視聴者からの資金的な支援を得て企画を実現できる仕組みも提供します。また、クラウドファンディングが成功した場合には、企画を考案した投稿者に対しても集まった資金から報酬として還元される仕組みを備えており、アイデア提案者のモチベーション向上と継続的な企画投稿を促進します。

## 2. ユーザー種別と権限

### 2.1 非ログインユーザー
- チャンネル一覧の閲覧
- チャンネル詳細の閲覧
- 投稿の閲覧
- アカウント登録
- ログイン

### 2.2 ログインユーザー
- 非ログインユーザーのすべての機能
- 投稿の作成
- 投稿への投票（いいね/よくないね）
- パスワードのリセット
- プロフィール情報の閲覧
- クラウドファンディングへの支援
- 支援履歴の閲覧

### 2.3 チャンネルオーナー
- ログインユーザーのすべての機能
- クラウドファンディングの作成
- 支援者管理
- 特典管理
- プロジェクト更新情報の投稿

### 2.4 管理者
- チャンネルオーナーのすべての機能
- プロジェクトの審査
- ユーザー管理
- 決済管理
- サイト統計の確認

## 3. 機能要件

### 3.1 認証機能
- Google認証によるログイン
- ログアウト機能

**注：メールアドレスとパスワードによる認証（サインアップ、ログイン、パスワードリセット）は廃止されました。**

### 3.2 チャンネル機能
- YouTubeチャンネルの検索と表示
- チャンネル情報の表示（名前、説明、登録者数、アイコン）
- チャンネルごとの投稿一覧表示
- チャンネルの統計情報表示（投稿数、最新投稿日時）

### 3.3 投稿機能
- チャンネルに対する新規投稿の作成
- 投稿のタイトルと本文の入力
- 投稿の一覧表示（最新順、人気順）
- 投稿の詳細表示

### 3.4 投票機能
- 投稿に対する「いいね」投票
- 投稿に対する「よくないね」投票
- 投票の取り消し
- 投票に基づく投稿のスコア計算

### 3.5 プロフィール機能
- ユーザープロフィールの自動作成（ユーザー登録時）
- ユーザー名とアバター画像の表示

### 3.6 クラウドファンディング機能
- チャンネルオーナーによる企画のクラウドファンディング開始(チャンネルオーナーが投稿された企画から良いアイデアを見つけた場合、企画詳細ページからクラウドファンディングを開始可能)
- 目標金額の設定（All in型：目標金額の達成に関わらず、集まった支援金を受け取る方式）
- 支援期間の設定
- 支援者への特典設定
- 支援金の受け取り（Stripe決済）
- 支援状況の表示
- 支援履歴の管理
- プロジェクト更新情報の投稿
- 支援者への通知
- 管理者による審査プロセス
- 企画者への報酬還元（集まった資金の3%）
- 運営手数料（集まった資金の9%）
- 報酬受け取りの意思確認と振込先情報の登録
- 月次報酬支払い（毎月15日、前月末までの確定分）
- 最低報酬還元額の設定（集まった支援金が5万円以上の場合、報酬還元）

### 3.7 プロジェクト管理機能
- プロジェクトの作成と編集
- プロジェクト画像・動画アップロード機能
- プロジェクトの審査と公開
- 支援状況のリアルタイム表示
- 支援者情報の管理
- プロジェクト更新情報の管理
- 支援者へのメッセージ配信（将来実装予定）
- FAQ管理（将来実装予定）

### 3.8 支援管理機能
- 支援履歴の確認
- 特典の配送状況確認
- プロジェクト更新通知の受信
- 発案者への質問機能（将来実装予定）
- お気に入りプロジェクトの管理（将来実装予定）

### 3.9 コミュニケーション機能
- プロジェクト更新情報の通知
- 支援完了通知
- 特典発送通知
- システムお知らせ
- SNS連携による共有機能

## 4. 技術仕様

### 4.1 フロントエンド
- **フレームワーク**: Next.js (App Router)
- **言語**: TypeScript
- **UIライブラリ**: React
- **スタイリング**: Tailwind CSS, Shadcn UI, Radix UI
- **状態管理**: React Server Components (RSC)優先
- **認証**: Supabase Auth

### 4.2 バックエンド
- **データベース**: PostgreSQL (Supabase)
- **認証**: Supabase Auth
- **API**: Supabase API, Server Actions
- **決済**: Stripe API

### 4.3 外部連携
- **YouTube Data API**: チャンネル情報の取得

## 5. UI/UX要件

### 5.1 レスポンシブデザイン
- モバイル、タブレット、デスクトップに対応したレスポンシブレイアウト
- モバイルファーストアプローチ

### 5.2 多言語対応
- 日本語インターフェース
- 英語インターフェース（一部実装済み）

### 5.3 アクセシビリティ
- WAI-ARIAガイドラインに準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応



## 9. セキュリティ要件

### 9.1 認証とアクセス制御
- Supabaseの認証システムを使用
- RLS（Row Level Security）ポリシーによるデータアクセス制御
- HTTPS通信の強制

### 9.2 データバリデーション
- サーバーサイドでのデータ検証
- クライアントサイドでのフォームバリデーション

### 9.3 決済セキュリティ
- Stripeのセキュアな決済システムの利用
- 決済情報の暗号化
- 不正アクセス防止のための認証強化

### 9.4 報酬管理セキュリティ
- 振込先情報の暗号化保存
- 報酬計算の自動化と監査ログ
- 不正な報酬支払いの防止
- 報酬支払い履歴の管理

## 10. パフォーマンス要件
- ページロード時間の最適化（Web Vitals指標の向上）
- 画像の最適化（WebP形式、サイズデータの含有、遅延ローディング）
- SSR（サーバーサイドレンダリング）とRSC（React Server Components）の活用
- データベースクエリの最適化とインデックスの適切な設定

## 11. 将来の拡張予定
- 投稿詳細ページの実装
- ユーザープロフィール編集機能
- コメント機能
- 通知システム
- ソーシャルシェア機能
- モデレーション機能
- クラウドファンディングの進捗レポート機能
- 支援者向けの特典管理システム
- 自動課金システム
- 支援者限定コンテンツ配信
- プロジェクトカテゴリ機能
- プロジェクトタグ機能
- 支援者へのメッセージ配信機能
- FAQ管理機能
- プロジェクト検索・フィルタリング機能
- おすすめプロジェクト表示機能
- 売上レポート機能
- ユーザー統計機能
- カテゴリ別人気分析機能
- 不正検知機能
## 12. MVP（最小実行製品）の範囲
- 基本的な認証機能（登録、ログイン、ログアウト）
- チャンネル検索と表示
- 投稿の作成と表示
- 投票機能
- モバイル対応UIの基本実装
- 基本的なクラウドファンディング機能
- Stripe決済の統合
- 支援特典の管理
- 支援状況の表示

## 13. テスト要件
- ユニットテスト
- 統合テスト
- E2Eテスト
- アクセシビリティテスト
- パフォーマンステスト

---

本要件定義書は現在の実装に基づいており、アプリケーションの開発進行に伴い更新される可能性があります。 