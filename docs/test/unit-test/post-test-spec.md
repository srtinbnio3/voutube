# 投稿機能テスト仕様書

## 概要
このテスト仕様書は、IdeaTubeアプリケーションの投稿機能に関する単体テストの内容を定義します。

## テスト対象機能
- 投稿一覧表示（POST-01）
- 投稿作成（POST-02）
- 投稿ソート（人気順）（POST-03）
- 投稿ソート（新着順）（POST-04）
- 投稿詳細表示（POST-05）
- 投稿削除（POST-07）

## テスト仕様

### POST-01: 投稿一覧表示

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-01-01 | 投稿のあるチャンネルの投稿一覧表示 | チャンネル詳細ページアクセス | 投稿のリスト表示 | 投稿のあるチャンネル |
| POST-01-02 | 投稿のないチャンネルの投稿一覧表示 | チャンネル詳細ページアクセス | 「投稿がありません」メッセージ表示 | 投稿のないチャンネル |
| POST-01-03 | ページネーション動作確認 | 「次へ」ボタンクリック | 次のページの投稿表示 | 多数の投稿のあるチャンネル |
| POST-01-04 | 投稿一覧の各投稿情報表示 | チャンネル詳細ページアクセス | 各投稿のタイトル、作成者、作成日時、スコア表示 | 投稿のあるチャンネル |
| POST-01-05 | 投稿一覧のレスポンシブ表示 | 画面サイズ変更 | デバイスサイズに応じたレイアウト調整 | 投稿のあるチャンネル |

### POST-02: 投稿作成

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-02-01 | 有効なタイトルと内容で投稿作成 | タイトル: 有効なタイトル<br>内容: 有効な内容 | 投稿作成成功、投稿一覧に表示 | ログイン済みユーザー |
| POST-02-02 | 空のタイトルで投稿作成 | タイトル: (空)<br>内容: 有効な内容 | エラーメッセージ表示（タイトル必須） | ログイン済みユーザー |
| POST-02-03 | 空の内容で投稿作成 | タイトル: 有効なタイトル<br>内容: (空) | エラーメッセージ表示（内容必須） | ログイン済みユーザー |
| POST-02-04 | 文字数制限超過のタイトルで投稿作成 | タイトル: [文字数制限超過]<br>内容: 有効な内容 | エラーメッセージ表示（タイトル文字数制限） | ログイン済みユーザー |
| POST-02-05 | 文字数制限超過の内容で投稿作成 | タイトル: 有効なタイトル<br>内容: [文字数制限超過] | エラーメッセージ表示（内容文字数制限） | ログイン済みユーザー |
| POST-02-06 | 非ログイン状態での投稿作成 | 投稿フォームアクセス | ログインページへリダイレクト | 非ログインユーザー |
| POST-02-07 | フォーム送信中の二重投稿防止 | 投稿ボタン連打 | 1件のみ投稿作成 | ログイン済みユーザー |

### POST-03: 投稿ソート（人気順）

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-03-01 | 人気順ソートの選択 | 「人気順」オプション選択 | スコアの高い順に投稿表示 | 複数の投稿と投票のあるチャンネル |
| POST-03-02 | スコアが同じ投稿のソート | 「人気順」オプション選択 | スコアが同じ場合、作成日時の新しい順で表示 | スコアが同じ投稿が複数存在 |
| POST-03-03 | スコアがnullの投稿のソート位置 | 「人気順」オプション選択 | スコアがnullの投稿は最後に表示 | スコアがnullの投稿が存在 |
| POST-03-04 | ソート後のページネーション | 「人気順」選択後ページネーション | ソート順を維持したままページ切り替え | 多数の投稿のあるチャンネル |
| POST-03-05 | 投票後のソート順更新 | 投票後「人気順」表示 | 投票した投稿のソート位置が更新される | 複数の投稿のあるチャンネル |

### POST-04: 投稿ソート（新着順）

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-04-01 | 新着順ソートの選択 | 「新着順」オプション選択 | 作成日時の新しい順に投稿表示 | 複数の投稿のあるチャンネル |
| POST-04-02 | 作成日時が同じ投稿のソート | 「新着順」オプション選択 | 日時が同じ場合、スコアの高い順で表示 | 作成日時が同じ投稿が複数存在 |
| POST-04-03 | ソート後のページネーション | 「新着順」選択後ページネーション | ソート順を維持したままページ切り替え | 多数の投稿のあるチャンネル |
| POST-04-04 | 新規投稿作成後のソート順 | 新規投稿作成後「新着順」表示 | 新規投稿が最上位に表示される | 複数の投稿のあるチャンネル |

### POST-05: 投稿詳細表示

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-05-01 | 投稿詳細ページへのアクセス | 投稿タイトルクリック | 投稿詳細の表示 | 実装後テスト |
| POST-05-02 | 存在しない投稿IDでのアクセス | 無効な投稿IDのURL | 「投稿が見つかりません」エラー表示 | 実装後テスト |
| POST-05-03 | 投稿詳細情報の表示内容確認 | 投稿タイトルクリック | タイトル、内容、作成者、日時、スコア表示 | 実装後テスト |
| POST-05-04 | 投稿詳細レスポンシブ表示 | 画面サイズ変更 | デバイスサイズに応じたレイアウト調整 | 実装後テスト |

### POST-07: 投稿削除

| テストID | テスト内容 | 入力値 | 期待される結果 | 前提条件 |
|---------|-----------|--------|--------------|---------|
| POST-07-01 | 自分の投稿の削除 | 削除ボタンクリック＋確認 | 投稿削除成功、一覧から非表示 | 実装後テスト |
| POST-07-02 | 他者の投稿の削除アクセス | 他者の投稿の削除アクション実行 | アクセス拒否、エラーメッセージ表示 | 実装後テスト |
| POST-07-03 | 投稿削除の取り消し | 削除ボタンクリック＋キャンセル | 削除キャンセル、投稿表示維持 | 実装後テスト |

## 特記事項
- 投稿のタイトルは3〜100文字の制限があると想定
- 投稿の内容は10〜1000文字の制限があると想定
- 投稿一覧は初期表示時に人気順（スコアの高い順）でソートされる
- 投稿の作成者のみが編集・削除可能とする想定
- 投稿スコアがnullの場合（投票がない場合）、人気順ソートでは最後に表示される 